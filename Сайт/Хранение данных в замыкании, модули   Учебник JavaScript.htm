<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<!-- saved from url=(0041)http://learn.javascript.ru/closures-usage -->
<html xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml" xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" version="XHTML+RDFa 1.0" dir="ltr" class="js"><head profile="http://www.w3.org/1999/xhtml/vocab"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script async="" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/embed.js"></script>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="webmoney.attestation.label" content="webmoney attestation label#40DF25E3-33CE-4524-8E7D-149B6AFD6BC1"> 
  
<link rel="next" href="http://learn.javascript.ru/static-variables">
<link rel="shortcut icon" href="http://learn.javascript.ru/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="up" href="http://learn.javascript.ru/functions-closures">
<link rel="shortlink" href="http://learn.javascript.ru/node/688">
<meta name="Generator" content="Drupal 7 (http://drupal.org)">
<link rel="canonical" href="./Хранение данных в замыкании, модули   Учебник JavaScript_files/Хранение данных в замыкании, модули   Учебник JavaScript.htm">
<link rel="prev" href="http://learn.javascript.ru/closures">
  <title>Хранение данных в замыкании, модули | Учебник JavaScript</title>
  <meta property="og:title" content="">
  <meta property="og:type" content="website">
  <meta property="og:url" content="/closures-usage">
  <meta property="og:site_name" content="JavaScript.ru">
  <meta property="fb:admins" content="100001562528165">
  <script type="text/javascript" async="" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/watch.js"></script><script id="facebook-jssdk" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/all.js"></script><script src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/ga.js"></script><script id="gplus" async="" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/plusone.js"></script><script id="twitter-wjs" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/widgets.js"></script><script>if (window.devicePixelRatio > 1) document.cookie='hires=1; path=/';
  </script>

  <link type="text/css" rel="stylesheet" href="./Хранение данных в замыкании, модули   Учебник JavaScript_files/css_lT8TuQt2oyYuRahF2kdAzRK8TS4mCOGCqX4AM6iVWXw.css" media="all">
  <script type="text/javascript" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/js_r7yXfs4GlNaQRDS8XDyhjM-hUHfFb1AEN278gyhHg8A.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
$ = jQuery;
//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--

  SyntaxHighlighter.config.clipboardSwf = '/modules/syntaxhighlighter/clipboard.swf';
  $(function() {
    SyntaxHighlighter.highlight();
    })
  
//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"analytic","theme_token":"QSVKBhudanciKyP4V-ijGnW410R-ZrLWOXa4o-mdAiE","js":{"sites\/all\/modules\/jquery_update\/replace\/jquery\/1.9\/jquery.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"public:\/\/languages\/ru_9dlpwq9NGc9ma765uWKT7X6nspvGsev0NJuQXawFIuI.js":1,"modules\/dhtml_menu\/dhtml_menu.js":1,"modules\/editor\/user.js":1,"modules\/editor\/hotkeys.js":1,"modules\/mistype\/mistype.js":1,"modules\/myfilter\/myfilter.js":1,"modules\/mytheme\/misc.js":1,"modules\/myutils\/jquery.cookie.js":1,"modules\/myutils\/jquery.alerts.js":1,"modules\/myutils\/jquery-migrate-1.1.1.js":1,"modules\/myutils\/misc.js":1,"files\/tutorial\/js\/dom.js":1,"files\/tutorial\/js\/misc.js":1,"files\/tutorial\/js\/lodash.js":1,"modules\/syntaxhighlighter\/sh\/scripts\/shCore.js":1,"modules\/syntaxhighlighter\/sh\/scripts\/shBrushCss.js":1,"modules\/syntaxhighlighter\/sh\/scripts\/shBrushJava.js":1,"modules\/syntaxhighlighter\/sh\/scripts\/shBrushJScript.js":1,"modules\/syntaxhighlighter\/sh\/scripts\/shBrushPhp.js":1,"modules\/syntaxhighlighter\/sh\/scripts\/shBrushPlain.js":1,"modules\/syntaxhighlighter\/sh\/scripts\/shBrushXml.js":1,"modules\/disqus\/disqus.js":1,"0":1,"1":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"sites\/all\/modules\/simplenews\/simplenews.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"modules\/date\/date_api\/date.css":1,"modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"modules\/forum\/forum.css":1,"modules\/views\/css\/views.css":1,"modules\/ctools\/css\/ctools.css":1,"modules\/dhtml_menu\/dhtml_menu.css":1,"modules\/myutils\/jquery.alerts.css":1,"modules\/myutils\/misc.css":1,"modules\/syntaxhighlighter\/sh\/styles\/shCore.css":1,"modules\/syntaxhighlighter\/sh\/styles\/shThemeDefault.css":1,"themes\/analytic\/style.css":1,"themes\/analytic\/local.css":1,"themes\/analytic\/linkindication.css":1}},"dhtmlMenu":{"nav":"none","animation":{"effects":{"height":"height","opacity":"opacity","width":0},"speed":"500"},"effects":{"siblings":"close-same-tree","children":"none","remember":"0"},"filter":{"type":"blacklist","list":{"book-toc-246":0,"book-toc-297":0,"book-toc-511":0,"book-toc-67":0,"main-menu":0,"management":0,"navigation":0,"shortcut-set-1":0,"user-menu":0}}},"disqus":{"domain":"learnjavascriptru","url":"http:\/\/learn.javascript.ru\/closures-usage","title":"\u0425\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u0437\u0430\u043c\u044b\u043a\u0430\u043d\u0438\u0438, \u043c\u043e\u0434\u0443\u043b\u0438","identifier":"node\/688"}});
//--><!]]>
</script>
  
<script src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/share.php"></script></head>
<body id="body" class="html not-front not-logged-in no-sidebars page-node page-node- page-node-688 node-type-book disqus-processed">

    
<iframe name="resizer" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/iframe-resize.htm" style="display:none"></iframe>

<div class="make-it-center">



<div class="rws-primary-menu clearfix">
  <ul class="links primary-links">
    <li>
      <a href="http://javascript.ru/">JavaScript.ru</a>
          </li>
    <li><a href="http://learn.javascript.ru/">Учебник</a></li>
    <li><a href="http://learn.javascript.ru/play">Песочница</a></li>

    <li><a href="http://es5.javascript.ru/">Спецификация ES5</a></li>
    <li><a href="http://javascript.ru/forum">Форум</a></li>
    <li><a href="http://learn.javascript.ru/chat">Чат</a></li>
    <li><a href="http://javascript.ru/courses">Курсы</a></li>

    <li style="float:right"><form action="./Хранение данных в замыкании, модули   Учебник JavaScript_files/Хранение данных в замыкании, модули   Учебник JavaScript.htm" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline" style="margin-top:12px">
<input type="text" maxlength="128" placeholder=" Найти" name="search_block_form" id="edit-search-block-form-1" value="" class="form-text"><input type="image" style="background:inherit;border:none;height:17px;padding:0;margin:0 5px 0 3px" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/gray-arrow-right.png" name="op" id="edit-submit-button" value="" class="form-submit">
   <input type="hidden" name="form_build_id" id="9OLfi2UYR5p1vVnDBolNIDWv9kFFyFOaU1cFXIM6Gn0" value="9OLfi2UYR5p1vVnDBolNIDWv9kFFyFOaU1cFXIM6Gn0">
<input type="hidden" name="form_token" id="edit-search-block-form-form-token" value="0-BuOE3yV5fFYEsa8gvGgDxCWh3U1V_YDpp4jky8Jdo">
<input type="hidden" name="form_id" id="edit-search-block-form" value="search_block_form">
</div>
</div></form></li>
  </ul>

</div>


<div id="content-toggler" class="content-toggler">
  <span class="content-toggler-hide">Содержание (скрыть)</span>
  <span class="content-toggler-show">Содержание (показать)</span>
</div>
<ul class="sec-list" id="submenu-info">
  <li class="sec-item"><a href="http://javascript.ru/manual">Справочник</a></li>
  <li class="sec-item"><a href="http://learn.javascript.ru/user">Вход на сайт</a></li>
  <li class="sec-item"><a href="http://learn.javascript.ru/nodejs-screencast">Скринкаст по Node.JS</a></li>
  <li class="sec-item"><a href="http://learn.javascript.ru/about">О сайте</a></li>
</ul>


<!-- admin panel   -->
<!-- / admin panel -->



<div class="column-wrapper">







<!-- column-2 --><div class="column-2 
no-left-column
">


		        


<!-- PRINTING BLOCKS BEFORE THE CONTENT (with RED headers) -->
<!-- PRINTING BLOCKS BEFORE THE CONTENT (with RED headers) -->


    <h2 class="element-invisible">Вы здесь</h2><div class="breadcrumb"><a href="http://javascript.ru/">Главная</a> » <a href="http://learn.javascript.ru/tutorial">Учебник</a> » <a href="http://learn.javascript.ru/functions-closures">Функции и замыкания</a></div>		
        <div class="book-navigation book-navigation-upper" id="book-navigation-688">
                <div class="page-links clearfix">
                        <a title="Go to previous page" class="page-previous" href="http://learn.javascript.ru/closures">‹ Замыкания, функции изнутри</a>
            
                        <a title="Go to next page" class="page-next" href="http://learn.javascript.ru/static-variables">Статические переменные                ›</a>
                    </div>

    </div>
    
		


    <h1 class="title">Хранение данных в замыкании, модули</h1>		
		

                         



		<!-- main-content-block --><div class="main-content-block"> 
		  <div class="region region-content">
      <div class="block block-open 
  block-system clearfix" id="block-system-main">
      
   <div class="content clearfix">



<div oncanplay="1" class="clearfix node node-nid-688  node-book node node-book ">
    

    
    <ol class="toc-full">
<li><a href="http://learn.javascript.ru/closures-usage#данные-для-счётчика">Данные для счётчика</a><ol>
<li><a href="http://learn.javascript.ru/closures-usage#объект-счётчика">Объект счётчика</a></li>
<li><a href="http://learn.javascript.ru/closures-usage#объект-счётчика-функция">Объект счётчика + функция</a></li></ol></li>
<li><a href="http://learn.javascript.ru/closures-usage#приём-проектирования-модуль">Приём проектирования «Модуль»</a></li>
<li><a href="http://learn.javascript.ru/closures-usage#задачи-на-понимание-замыканий">Задачи на понимание замыканий</a></li></ol>

        
    <div class="content clearfix ">


    
    <div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even"> <p>Замыкания можно использовать сотнями способов. Иногда люди сами не замечают, что использовали замыкания — настолько это просто и естественно.</p>
<p>В этой главе мы рассмотрим примеры использования замыканий для хранения данных и задачи на эту тему.</p>
<!--break-->
<h2><a name="данные-для-счётчика" href="http://learn.javascript.ru/closures-usage#данные-для-счётчика" id="данные-для-счётчика">Данные для счётчика</a></h2>
<p>В примере ниже <code>makeCounter</code> создает функцию, которая считает свои вызовы:</p>
<p></p><div id="highlighter_38503411831" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_38503411831_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_38503411831" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="run-button" value="Запустить" style="width: 100px;"><a href="http://learn.javascript.ru/closures-usage#" title="Редактировать" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">function</code> <code class="plain">makeCounter() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">currentCount = 0;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="keyword">function</code><code class="plain">() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">currentCount++;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">currentCount;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="keyword">var</code> <code class="plain">counter = makeCounter();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="comments">// каждый вызов увеличивает счётчик</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">counter(); </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="plain">counter(); </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="plain">alert( counter() ); </code><code class="comments">// 3</code></td></tr></tbody></table></div></div></div><p></p>
<p>Хранение текущего числа вызовов осуществляется в переменной <code>currentCount</code> внешней функции. </p>
<p>При этом, так как каждый вызов <code>makeCounter</code> создает новый объект переменных, то все создаваемые функции-счётчики взаимно независимы.</p>
<p></p><div id="highlighter_69609174947" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_69609174947_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_69609174947" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">var</code> <code class="plain">c1 = makeCounter();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="keyword">var</code> <code class="plain">c2 = makeCounter();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">alert( c1() ); </code><code class="comments">// 1</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">alert( c2() ); </code><code class="comments">// 1, <u>счётчики независимы</u></code></td></tr></tbody></table></div></div></div><p></p>
<p>Добавим счётчику аргумент, который, если передан, устанавливает значение:</p>
<p></p><div id="highlighter_77267848980" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_77267848980_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_77267848980" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="run-button" value="Запустить" style="width: 100px;"><a href="http://learn.javascript.ru/closures-usage#" title="Редактировать" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">function</code> <code class="plain">makeCounter() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">currentCount = 0;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="keyword">function</code><code class="plain">(newCount) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(newCount !== </code><code class="keyword">undefined</code><code class="plain">) { </code><code class="comments">// есть аргумент?</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">currentCount = +newCount; </code><code class="comments">// сделаем его новым значением счётчика</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// вернём текущее значение, счётчик всегда возвращает его (это удобно)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">currentCount;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">currentCount++;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">currentCount;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="keyword">var</code> <code class="plain">counter = makeCounter();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="plain">alert( counter() ); </code><code class="comments">// 1</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="plain">alert( counter(3) ); </code><code class="comments">// 3</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="plain">alert( counter() ); </code><code class="comments">// 4</code></td></tr></tbody></table></div></div></div><p></p>
<p>Здесь для проверки первого аргумента использовано сравнение с <code>undefined</code>, так что вызовы <code>counter(undefined)</code> и <code>counter()</code> сработают идентично, как будто аргументов нет.</p>
<h3><a name="объект-счётчика" href="http://learn.javascript.ru/closures-usage#объект-счётчика" id="объект-счётчика">Объект счётчика</a></h3>
<p>Можно пойти дальше и возвратить полноценный объект с функциями управления счётчиком:</p>
<ul><li><code>getNext()</code> — получить следующее значение, то, что раньше делал вызов <code>counter()</code>.</li>
<li><code>set(value)</code> — поставить значение.</li>
<li><code>reset()</code> — обнулить счётчик.</li>
</ul><p></p><div id="highlighter_27633403218" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_27633403218_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_27633403218" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="run-button" value="Запустить" style="width: 100px;"><a href="http://learn.javascript.ru/closures-usage#" title="Редактировать" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">function</code> <code class="plain">makeCounter() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">currentCount = 0;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">getNext: </code><code class="keyword">function</code><code class="plain">() {&nbsp; </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">++currentCount;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">},</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">set: </code><code class="keyword">function</code><code class="plain">(value) {&nbsp; </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">currentCount = value;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">},</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">reset: </code><code class="keyword">function</code><code class="plain">() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">currentCount = 0;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="keyword">var</code> <code class="plain">counter = makeCounter();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="plain">alert( counter.getNext() ); </code><code class="comments">// 1</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="plain">alert( counter.getNext() ); </code><code class="comments">// 2</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="plain">counter.reset();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="plain">alert( counter.getNext() ); </code><code class="comments">// 1</code></td></tr></tbody></table></div></div></div><p></p>
<p>…Теперь <code>counter</code> — объект с методами, которые при работе используют <code>currentCount</code>. Снаружи никак иначе, кроме как через эти методы, к <code>currentCount</code> получить доступ нельзя, так как это локальная переменная. </p>
<h3><a name="объект-счётчика-функция" href="http://learn.javascript.ru/closures-usage#объект-счётчика-функция" id="объект-счётчика-функция">Объект счётчика + функция</a></h3>
<p>К сожалению, пропал короткий красивый вызов <code>counter()</code>, вместо него теперь <code>counter.getNext()</code>. Но он ведь был таким коротким и удобным… Так что давайте вернём его:</p>
<p></p><div id="highlighter_43659106037" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_43659106037_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_43659106037" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="run-button" value="Запустить" style="width: 100px;"><a href="http://learn.javascript.ru/closures-usage#" title="Редактировать" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">function</code> <code class="plain">makeCounter() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">currentCount = 0;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="comments">// возвращаемся к функции</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">function</code> <code class="plain">counter() {&nbsp; </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">++currentCount;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="comments">// ...и добавляем ей методы!</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">counter.set = </code><code class="keyword">function</code><code class="plain">(value) {&nbsp; </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">currentCount = value;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">counter.reset = </code><code class="keyword">function</code><code class="plain">() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">currentCount = 0;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">counter;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="keyword">var</code> <code class="plain">counter = makeCounter();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="plain">alert( counter() ); </code><code class="comments">// 1</code></td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="plain">alert( counter() ); </code><code class="comments">// 2</code></td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>25</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="plain">counter.reset();</code></td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="plain">alert( counter() ); </code><code class="comments">// 1</code></td></tr></tbody></table></div></div></div><p></p>
<p><strong>Красиво, не правда ли? Тот факт, что объект — функция, вовсе не мешает добавить к нему сколько угодно методов.</strong></p>
<h2><a name="приём-проектирования-модуль" href="http://learn.javascript.ru/closures-usage#приём-проектирования-модуль" id="приём-проектирования-модуль">Приём проектирования «Модуль»</a></h2>
<p>Приём программирования «модуль» имеет громадное количество вариаций.</p>
<p>Его цель — объявить функции так, чтобы ненужные подробности их реализаций были скрыты. В том числе: временные переменные, константы, вспомогательные мини-функции и т.п. </p>
<p>Оформление кода в модуль предусматривает следующие шаги:</p>
<ol><li>Создаётся функция-обёртка, которая выполняется «на месте»:
<div id="highlighter_78511312045" class="syntaxhighlighter nogutter  "><div class="lines"><div class="line alt1"><table><tbody><tr><td class="content"><code class="plain">(</code><code class="keyword">function</code><code class="plain">() { </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="plain">})();</code></td></tr></tbody></table></div></div></div>
</li>
<li>Внутрь этой функции пишутся локальные переменные и функции, которые пользователю модуля не нужны, но нужны самому модулю:
<p></p><div id="highlighter_44541865611" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_44541865611_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_44541865611" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">(</code><code class="keyword">function</code><code class="plain">() { </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">count = 0;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">function</code> <code class="plain">helper() { ... }</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">})();</code></td></tr></tbody></table></div></div></div><p></p>
<p>Они будут доступны только изнутри.
</p></li>
<li>Те функции, которые нужны пользователю, «экспортируются» во внешнюю область видимости.
<p>Если функция одна — это можно сделать явным возвратом <code>return</code>:
</p><div id="highlighter_8716049534" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_8716049534_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_8716049534" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">var</code> <code class="plain">func = (</code><code class="keyword">function</code><code class="plain">() { </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">count = 0;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">function</code> <code class="plain">helper() { ... }</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="keyword">function</code><code class="plain">() { ... }</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">})();</code></td></tr></tbody></table></div></div></div>
…Если функций много — можно присвоить их напрямую в <code>window</code>:
<div id="highlighter_76603890629" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_76603890629_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_76603890629" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">(</code><code class="keyword">function</code><code class="plain">() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">function</code> <code class="plain">helper() { ... }</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">window.createMenu = </code><code class="keyword">function</code><code class="plain">() { ... };</code></td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">window.createDialog = </code><code class="keyword">function</code><code class="plain">() { ... };</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="plain">})();</code></td></tr></tbody></table></div></div></div><p></p>
<p>Или, что ещё лучше, вернуть объект с ними:
</p><div id="highlighter_81816734094" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_81816734094_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_81816734094" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">var</code> <code class="plain">MyLibrary = (</code><code class="keyword">function</code><code class="plain">() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">function</code> <code class="plain">helper() { ... }</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">createMenu: </code><code class="keyword">function</code><code class="plain">() { ... },</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">createDialog: </code><code class="keyword">function</code><code class="plain">() { ... }</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">})();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="comments">// использование</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">MyLibrary.createMenu();</code></td></tr></tbody></table></div></div></div>
<p></p></li>
</ol><p><strong>Все функции модуля будут через замыкание иметь доступ к другим переменным и внутренним функциям. Но снаружи программист, использующий модуль, может обращаться напрямую только к тем, которые экспортированы.</strong></p>
<p>Благодаря этому будут скрыты внутренние аспекты реализации, которые нужны только разработчику модуля.</p>
<p>Можно придумать и много других вариаций такого подхода. В конце концов, «модуль» — это всего лишь функция-обёртка для скрытия переменных.</p>
<h2><a name="задачи-на-понимание-замыканий" href="http://learn.javascript.ru/closures-usage#задачи-на-понимание-замыканий" id="задачи-на-понимание-замыканий">Задачи на понимание замыканий</a></h2>
<p></p><div class="clearfix task-embedded node-nid-57 node node-learning-task ">




<p class="learning-task-marks">
  <abbr title="Насколько эта задача важна для освоения материала, от 1 до 5">Важность:</abbr> 4</p>

<div class="task-formulation"> <p>Напишите функцию <code>sum</code>, которая работает так: <code>sum(a)(b) = a+b</code>.</p>
<p>Да, именно так, через двойные скобки (это не опечатка). Например:
</p><div id="highlighter_46974000265" class="syntaxhighlighter nogutter  "><div class="lines"><div class="line alt1"><table><tbody><tr><td class="content"><code class="plain">sum(1)(2) = 3</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="plain">sum(5)(-1) = 4</code></td></tr></tbody></table></div></div></div><p></p>
 </div>



<div class="task-hint-open">
  Решение</div>

<div class="task-hint">
      <div class="task-solution-header">Решение</div>
   
    
<p>Чтобы вторые скобки в вызове работали - первые должны возвращать функцию. </p>
<p>Эта функция должна знать про <code>a</code> и уметь прибавлять <code>a</code> к <code>b</code>. Вот так:</p>
<p></p><div id="highlighter_54159594630" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_54159594630_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_54159594630" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="run-button" value="Запустить" style="width: 100px;"><a href="http://learn.javascript.ru/closures-usage#" title="Редактировать" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">function</code> <code class="plain">sum(a) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="keyword">function</code><code class="plain">(b) { </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">a + b;&nbsp; </code><code class="comments">// возьмет a из внешнего LexicalEnvironment</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="plain">alert( sum(1)(2) );</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">alert( sum(5)(-1) );</code></td></tr></tbody></table></div></div></div><p></p></div>


<div style="text-align:right;margin-bottom:-3px">

<a href="http://learn.javascript.ru/task/summa-cherez-zamykanie">[Открыть задачу в новом окне]</a></div>



</div>



<p></p>
<p></p><div class="clearfix task-embedded node-nid-36 node node-learning-task ">




<p class="learning-task-marks">
  <abbr title="Насколько эта задача важна для освоения материала, от 1 до 5">Важность:</abbr> 5</p>

<div class="task-formulation"> <ol><li>Создайте функцию <code>filter(arr, func)</code>, которая получает массив <code>arr</code> и возвращает новый, в который входят только те элементы <code>arr</code>, для которых <code>func</code> возвращает <code>true</code>.</li>
<li>Создайте набор «готовых фильтров»: <code>inBetween(a,b)</code> — «между a,b», <code>inArray([...])</code> — «в массиве <code>[...]</code>».<br>
Использование должно быть таким: 
<ul><li><code>filter(arr, inBetween(3,6))</code> — выберет только числа от 3 до 6,</li>
<li><code>filter(arr, inArray([1,2,3]))</code> — выберет только элементы, совпадающие с одним из значений массива.</li>
</ul></li>
</ol><p>Пример, как это должно работать:</p>
<p></p><div id="highlighter_70479069091" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_70479069091_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_70479069091" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="comments">/* .. ваш код для filter, inBetween, inArray */</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="keyword">var</code> <code class="plain">arr = [1, 2, 3, 4, 5, 6, 7];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">alert( filter(arr, </code><code class="keyword">function</code><code class="plain">(a) { </code><code class="keyword">return</code> <code class="plain">a % 2 == 0 }) ); </code><code class="comments">// 2,4,6</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">alert( filter(arr, inBetween(3,6)) ); </code><code class="comments">// 3,4,5,6</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="plain">alert( filter(arr, inArray([1,2,10])) ); </code><code class="comments">// 1,2</code></td></tr></tbody></table></div></div></div><p></p>
 </div>



<div class="task-hint-open">
  Функция фильтрации</div>

<div class="task-hint">
      <div class="task-solution-header">Решение</div>
   
    <div class="task-hint-header">
    Функция фильтрации  </div>
     
<p></p><div id="highlighter_74593511340" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_74593511340_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_74593511340" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="run-button" value="Запустить" style="width: 100px;"><a href="http://learn.javascript.ru/closures-usage#" title="Редактировать" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">function</code> <code class="plain">filter(arr, func) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">result = [];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">for</code><code class="plain">(</code><code class="keyword">var</code> <code class="plain">i=0; i&lt;arr.length; i++) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">val&nbsp; = arr[i];</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(func(val)) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">result.push(val);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">result;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="keyword">var</code> <code class="plain">arr = [1, 2, 3, 4, 5, 6, 7];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="plain">alert( filter(arr, </code><code class="keyword">function</code><code class="plain">(a) { </code><code class="keyword">return</code> <code class="plain">a % 2 == 0; }) ); </code><code class="comments">// 2, 4, 6</code></td></tr></tbody></table></div></div></div><p></p></div>
<div class="task-hint-open">
  Фильтр inBetween</div>

<div class="task-hint">
   
    <div class="task-hint-header">
    Фильтр inBetween  </div>
     
<p></p><div id="highlighter_50053835195" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_50053835195_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_50053835195" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="run-button" value="Запустить" style="width: 100px;"><a href="http://learn.javascript.ru/closures-usage#" title="Редактировать" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">function</code> <code class="plain">filter(arr, func) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">result = [];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">for</code><code class="plain">(</code><code class="keyword">var</code> <code class="plain">i=0; i&lt;arr.length; i++) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">val&nbsp; = arr[i];</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(func(val)) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">result.push(val);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">result;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="keyword">function</code> <code class="plain">inBetween(a, b) {</code></td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="keyword">function</code><code class="plain">(x) {</code></td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">x &gt;=a &amp;&amp; x &lt;= b;</code></td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="keyword">var</code> <code class="plain">arr = [1, 2, 3, 4, 5, 6, 7];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="plain">alert( filter(arr, inBetween(3,6)) ); </code><code class="comments">// 3,4,5,6</code></td></tr></tbody></table></div></div></div><p></p></div>
<div class="task-hint-open">
  Фильтр inArray</div>

<div class="task-hint">
   
    <div class="task-hint-header">
    Фильтр inArray  </div>
     
<p></p><div id="highlighter_46682191407" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_46682191407_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_46682191407" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="run-button" value="Запустить" style="width: 100px;"><a href="http://learn.javascript.ru/closures-usage#" title="Редактировать" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">function</code> <code class="plain">filter(arr, func) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">result = [];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">for</code><code class="plain">(</code><code class="keyword">var</code> <code class="plain">i=0; i&lt;arr.length; i++) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">val&nbsp; = arr[i];</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(func(val)) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">result.push(val);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">result;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="keyword">function</code> <code class="plain">inArray(arr) {</code></td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="keyword">function</code><code class="plain">(x) {</code></td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">arr.indexOf(x) != -1;</code></td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="keyword">var</code> <code class="plain">arr = [1, 2, 3, 4, 5, 6, 7];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="plain">alert( filter(arr, inArray([1,2,10])) ); </code><code class="comments">// 1,2</code></td></tr></tbody></table></div></div></div><p></p></div>


<div style="text-align:right;margin-bottom:-3px">

<a href="http://learn.javascript.ru/task/filtraciya-cherez-funkciu">[Открыть задачу в новом окне]</a></div>



</div>



<p></p>
<p></p><div class="clearfix task-embedded node-nid-342 node node-learning-task ">




<p class="learning-task-marks">
  <abbr title="Насколько эта задача важна для освоения материала, от 1 до 5">Важность:</abbr> 5</p>

<div class="task-formulation"> <p>В некоторых языках программирования существует объект «строковый буфер», который аккумулирует внутри себя значения. Его функционал состоит из двух возможностей:</p>
<ol><li>Добавить значение в буфер.</li>
<li>Получить текущее содержимое.</li>
</ol><p><strong>Задача — реализовать строковый буфер на функциях в JavaScript, со следующим синтаксисом:</strong></p>
<ul><li>Создание объекта: <code>var buffer = makeBuffer();</code>.</li>
<li>Вызов <code>makeBuffer</code> должен возвращать такую функцию <code>buffer</code>, которая при вызове <code>buffer(value)</code> добавляет значение в некоторое внутреннее хранилище, а при вызове без аргументов <code>buffer()</code> — возвращает его.</li>
</ul><p>Вот пример работы:</p>
<p></p><div id="highlighter_19769034768" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_19769034768_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_19769034768" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">function</code> <code class="plain">makeBuffer() { </code><code class="comments">/* ваш код */</code> <code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="keyword">var</code> <code class="plain">buffer = makeBuffer();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="comments">// добавить значения к буферу</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="plain">buffer(</code><code class="string">'Замыкания'</code><code class="plain">); </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">buffer(</code><code class="string">' Использовать'</code><code class="plain">); </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">buffer(</code><code class="string">' Нужно!'</code><code class="plain">); </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="comments">// получить текущее значение</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">alert( buffer() ); </code><code class="comments">// Замыкания Использовать Нужно!</code></td></tr></tbody></table></div></div></div><p></p>
<p>Буфер должен преобразовывать все данные к строковому типу:
</p><div id="highlighter_29317660839" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_29317660839_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_29317660839" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">var</code> <code class="plain">buffer = makeBuffer();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">buffer(0); buffer(1); buffer(0);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">alert( buffer() ); </code><code class="comments">// '010'</code></td></tr></tbody></table></div></div></div><p></p>
<p>Решение не должно использовать глобальные переменные.</p>
 </div>



<div class="task-hint-open">
  Решение</div>

<div class="task-hint">
      <div class="task-solution-header">Решение</div>
   
    
<p>Текущее значение текста удобно хранить в замыкании, в локальной переменной <code>makeBuffer</code>:</p>
<p></p><div id="highlighter_9780677967" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_9780677967_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_9780677967" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="run-button" value="Запустить" style="width: 100px;"><a href="http://learn.javascript.ru/closures-usage#" title="Редактировать" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">function</code> <code class="plain">makeBuffer() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">text = </code><code class="string">''</code><code class="plain">; </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="keyword">function</code><code class="plain">(piece) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(piece === </code><code class="keyword">undefined</code><code class="plain">) { </code><code class="comments">// вызов без аргументов</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">text;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">text += piece; </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="keyword">var</code> <code class="plain">buffer = makeBuffer();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="comments">// добавить значения к буферу</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="plain">buffer(</code><code class="string">'Замыкания'</code><code class="plain">); </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="plain">buffer(</code><code class="string">' Использовать'</code><code class="plain">); </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="plain">buffer(</code><code class="string">' Нужно!'</code><code class="plain">); </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="plain">alert( buffer() ); </code><code class="comments">// 'Замыкания Использовать Нужно!'</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="keyword">var</code> <code class="plain">buffer2 = makeBuffer();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="plain">buffer2(0); buffer2(1); buffer2(0);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="plain">alert( buffer2() ); </code><code class="comments">// '010'</code></td></tr></tbody></table></div></div></div><p></p>
<p>Начальное значение <code>text = ''</code> — пустая строка. Поэтому операция <code>text += piece</code> прибавляет <code>piece</code> к строке, автоматически преобразуя его к строковому типу, как и требовалось в условии.</p></div>


<div style="text-align:right;margin-bottom:-3px">

<a href="http://learn.javascript.ru/task/funkciya-strokovyj-bufer">[Открыть задачу в новом окне]</a></div>



</div>




<div class="clearfix task-embedded node-nid-802 node node-learning-task ">




<p class="learning-task-marks">
  <abbr title="Насколько эта задача важна для освоения материала, от 1 до 5">Важность:</abbr> 5</p>

<div class="task-formulation"> <p>Добавьте буферу из решения задачи <a href="http://learn.javascript.ru/task/funkciya-strokovyj-bufer">Функция - строковый буфер</a> метод <code>buffer.clear()</code>, который будет очищать текущее содержимое буфера:</p>
<p></p><div id="highlighter_6382275047" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_6382275047_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_6382275047" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">function</code> <code class="plain">makeBuffer() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">...ваш код...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="keyword">var</code> <code class="plain">buffer = makeBuffer();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">buffer(</code><code class="string">"Тест"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">buffer(</code><code class="string">" тебя не съест "</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="plain">alert( buffer() ); </code><code class="comments">// Тест тебя не съест</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">buffer.clear();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">alert( buffer() ); </code><code class="comments">// ""</code></td></tr></tbody></table></div></div></div><p></p>
 </div>



<div class="task-hint-open">
  Решение</div>

<div class="task-hint">
      <div class="task-solution-header">Решение</div>
   
    
<p></p><div id="highlighter_6863142923" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_6863142923_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_6863142923" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="run-button" value="Запустить" style="width: 100px;"><a href="http://learn.javascript.ru/closures-usage#" title="Редактировать" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">function</code> <code class="plain">makeBuffer() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">text = </code><code class="string">''</code><code class="plain">; </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">function</code> <code class="plain">buffer(piece) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(piece === </code><code class="keyword">undefined</code><code class="plain">) { </code><code class="comments">// вызов без аргументов</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">text;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">text += piece; </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">buffer.clear = </code><code class="keyword">function</code><code class="plain">() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">text = </code><code class="string">""</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">buffer;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="keyword">var</code> <code class="plain">buffer = makeBuffer();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="plain">buffer(</code><code class="string">"Тест"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="plain">buffer(</code><code class="string">" тебя не съест "</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="plain">alert( buffer() ); </code><code class="comments">// Тест тебя не съест</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="plain">buffer.clear();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="plain">alert( buffer() ); </code><code class="comments">// ""</code></td></tr></tbody></table></div></div></div><p></p></div>


<div style="text-align:right;margin-bottom:-3px">

<a href="http://learn.javascript.ru/task/strokovyy-bufer-s-metodami">[Открыть задачу в новом окне]</a></div>



</div>




<div class="clearfix task-embedded node-nid-705 node node-learning-task ">




<p class="learning-task-marks">
  <abbr title="Насколько эта задача важна для освоения материала, от 1 до 5">Важность:</abbr> 5</p>

<div class="task-formulation"> <ul><li>Будет ли работать доступ к переменной <code>name</code> через замыкание в примере ниже?</li>
<li>Удалится ли переменная <code>name</code> из памяти при выполнении <code>delete donkey.sayHi</code>? Если нет — можно ли к <code>name</code> как-то обратиться после удаления <code>donkey.sayHi</code>?</li>
<li>А если присвоить <code>donkey.sayHi = donkey.yell = null</code> — останется ли <code>name</code> в памяти?</li>
</ul><p></p><div id="highlighter_88866377668" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_88866377668_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_88866377668" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="run-button" value="Запустить" style="width: 100px;"><a href="http://learn.javascript.ru/closures-usage#" title="Редактировать" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">var</code> <code class="plain">makeDonkey = </code><code class="keyword">function</code><code class="plain">() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">name = </code><code class="string">"Ослик Иа"</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">sayHi: </code><code class="keyword">function</code><code class="plain">() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">alert(name);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">},</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">yell: </code><code class="keyword">function</code><code class="plain">() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">alert(</code><code class="string">'И-а, и-а!'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="keyword">var</code> <code class="plain">donkey = makeDonkey();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="plain">donkey.sayHi();</code></td></tr></tbody></table></div></div></div><p></p>
 </div>



<div class="task-hint-open">
  Решение</div>

<div class="task-hint">
      <div class="task-solution-header">Решение</div>
   
    
<ol><li>Да, будет работать, благодаря ссылке <code>[[Scope]]</code> на внешний объект переменных, которая будет присвоена функциям <code>sayHi</code> и <code>yell</code> при создании объекта.</li>
<li>Нет, <code>name</code> не удалится из памяти, поскольку несмотря на то, что <code>sayHi</code> больше нет, есть ещё функция <code>yell</code>, которая также ссылается на внешний объект переменных. Этот объект хранится целиком, вместе со всеми свойствами.
<p>При этом, так как функция <code>sayHi</code> удалена из объекта и ссылок на нее нет, то больше к переменной <code>name</code> обращаться некому. Получилось, что она «застряла» в памяти, хотя, по сути, никому не нужна.
</p></li>
<li>Если и <code>sayHi</code> и <code>yell</code> удалить, тогда, так как больше внутренних функций не останется, удалится и объект переменных вместе с <code>name</code>.</li>
</ol></div>


<div style="text-align:right;margin-bottom:-3px">

<a href="http://learn.javascript.ru/task/budet-li-dostup-cherez-zamykanie">[Открыть задачу в новом окне]</a></div>



</div>




<div class="clearfix task-embedded node-nid-39 node node-learning-task ">




<p class="learning-task-marks">
  <abbr title="Насколько эта задача важна для освоения материала, от 1 до 5">Важность:</abbr> 5</p>

<div class="task-formulation"> <p>Следующий код создает массив функций-стрелков <code>shooters</code>. По замыслу, каждый стрелок должен выводить свой номер:</p>
<p></p><div id="highlighter_44148050016" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_44148050016_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_44148050016" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="run-button" value="Запустить" style="width: 100px;"><a href="http://learn.javascript.ru/closures-usage#" title="Редактировать" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">function</code> <code class="plain">makeArmy() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">shooters = [];</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">for</code><code class="plain">(</code><code class="keyword">var</code> <code class="plain">i=0; i&lt;10; i++) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">shooter = </code><code class="keyword">function</code><code class="plain">() { </code><code class="comments">// функция-стрелок</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">alert(i); </code><code class="comments">// выводит свой номер</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">shooters.push(shooter);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">shooters;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="keyword">var</code> <code class="plain">army = makeArmy();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="plain">army[0](); </code><code class="comments">// стрелок выводит 10, а должен 0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="plain">army[5](); </code><code class="comments">// стрелок выводит 10...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="comments">// .. все стрелки выводят 10 вместо 0,1,2...9</code></td></tr></tbody></table></div></div></div><p></p>
<p>Почему все стрелки́ выводят одно и то же? Поправьте код, чтобы стрелки работали как задумано. Предложите несколько вариантов исправления.</p>
 </div>



<div class="task-hint-open">
  Что происходит в этом коде</div>

<div class="task-hint">
      <div class="task-solution-header">Решение</div>
   
    <div class="task-hint-header">
    Что происходит в этом коде  </div>
     
<p>Функция <code>makeArmy</code> делает следующее:</p>
<ol><li>Создаёт пустой массив <code>shooter</code>:
<div id="highlighter_17948266352" class="syntaxhighlighter nogutter  "><div class="lines"><div class="line alt1"><table><tbody><tr><td class="content"><code class="keyword">var</code> <code class="plain">shooters = [];</code></td></tr></tbody></table></div></div></div>
</li>
<li>В цикле заполняет массив элементами через <code>shooter.push</code>.<br>
При этом каждый элемент массива — это функция, так что в итоге после цикла массив будет таким:
<div id="highlighter_64925501007" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_64925501007_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_64925501007" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">shooters = [</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">function</code> <code class="plain">() { alert(i); },</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">function</code> <code class="plain">() { alert(i); },</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">function</code> <code class="plain">() { alert(i); },</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">function</code> <code class="plain">() { alert(i); },</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">function</code> <code class="plain">() { alert(i); },</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">function</code> <code class="plain">() { alert(i); },</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">function</code> <code class="plain">() { alert(i); },</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">function</code> <code class="plain">() { alert(i); },</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">function</code> <code class="plain">() { alert(i); },</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">function</code> <code class="plain">() { alert(i); }</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">];</code></td></tr></tbody></table></div></div></div>
Этот массив возвращается из функции.
</li>
<li>Вызов <code>army[5]()</code> — это получение элемента массива (им будет функция) на позиции <code>5</code>, и тут же — её запуск.</li>
</ol></div>
<div class="task-hint-open">
  Почему ошибка</div>

<div class="task-hint">
   
    <div class="task-hint-header">
    Почему ошибка  </div>
     
<p><strong>Вначале разберемся, почему все стрелки выводят одно и то же значение.</strong></p>
<p>В функциях-стрелках <code>shooter</code> отсутствует переменная <code>i</code>. Когда такая функция вызывается, то <code>i</code> она берет из внешнего <code>LexicalEnvironment</code>…</p>
<p>Каким будет значение <code>i</code>?</p>
<p>К моменту вызова <code>army[0]()</code>, функция <code>makeArmy</code> уже закончила работу. Цикл  завершился, последнее значение было <code>i=10</code>.</p>
<p>В результате все функции <code>shooter</code> получают одно и то же, последнее, значение <code>i=10</code>.</p>
<p>Попробуйте исправить проблему самостоятельно.</p></div>
<div class="task-hint-open">
  Исправление (3 варианта)</div>

<div class="task-hint">
   
    <div class="task-hint-header">
    Исправление (3 варианта)  </div>
     
<p>Есть несколько способов исправить ситуацию.</p>
<ol><li><strong>Первый способ исправить код - это привязать значение непосредственно к функции-стрелку:</strong>
<p></p><div id="highlighter_72613568115" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_72613568115_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_72613568115" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="run-button" value="Запустить" style="width: 100px;"><a href="http://learn.javascript.ru/closures-usage#" title="Редактировать" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">function</code> <code class="plain">makeArmy() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">shooters = [];</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">for</code><code class="plain">(</code><code class="keyword">var</code> <code class="plain">i=0; i&lt;10; i++) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">shooter = </code><code class="keyword">function</code> <code class="plain">me() {</code></td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">alert( me.i ); </code></td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">shooter.i = i;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">shooters.push(shooter);&nbsp;&nbsp;&nbsp; </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">shooters; </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="keyword">var</code> <code class="plain">army = makeArmy();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="plain">army[0](); </code><code class="comments">// 0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="plain">army[1](); </code><code class="comments">// 1</code></td></tr></tbody></table></div></div></div><p></p>
<p>В этом случае каждая функция хранит в себе свой собственный номер.</p>
<p>Кстати, обратите внимание на использование Named Function Expression, вот в этом участке:
</p><div id="highlighter_85051654978" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_85051654978_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_85051654978" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="keyword">var</code> <code class="plain">shooter = </code><code class="keyword">function</code> <code class="plain">me() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">alert( me.i ); </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">...</code></td></tr></tbody></table></div></div></div><p></p>
<p>Если убрать имя <code>me</code> и оставить обращение через <code>shooter</code>, то работать не будет:</p>
<p></p><div id="highlighter_56517661200" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_56517661200_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_56517661200" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">for</code><code class="plain">(</code><code class="keyword">var</code> <code class="plain">i=0; i&lt;10; i++) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">shooter = </code><code class="keyword">function</code><code class="plain">() { </code></td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">alert(shooter.i); </code><code class="comments">// вывести свой номер (не работает!)</code></td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// потому что откуда функция возьмёт переменную shooter?</code></td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// ..правильно, из внешнего объекта, а там она одна на всех</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">shooter.i = i;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">shooters.push(shooter);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>9</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p></p>
<p>Вызов <code>alert(shooter.i)</code> при вызове будет искать переменную <code>shooter</code>, а эта переменная меняет значение по ходу цикла, и к моменту вызову она равна последней функции, созданной в цикле. </p>
<p>Если использовать Named Function Expression, то имя жёстко привязывается к конкретной функции, и поэтому в коде выше <code>me.i</code> возвращает правильный <code>i</code>.</p>
</li>
<li><strong>Другое, более продвинутое решение —- использовать дополнительную функцию для того, чтобы «поймать» текущее значение <code>i</code></strong>:
<p></p><div id="highlighter_59382376750" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_59382376750_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_59382376750" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="run-button" value="Запустить" style="width: 100px;"><a href="http://learn.javascript.ru/closures-usage#" title="Редактировать" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">function</code> <code class="plain">makeArmy() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">shooters = [];</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">for</code><code class="plain">(</code><code class="keyword">var</code> <code class="plain">i=0; i&lt;10; i++) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">shooter = (</code><code class="keyword">function</code><code class="plain">(x) {</code></td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>08</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="keyword">function</code><code class="plain">() {</code></td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">alert( x ); </code></td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>12</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">})(i);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">shooters.push(shooter);&nbsp;&nbsp; </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">shooters; </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="keyword">var</code> <code class="plain">army = makeArmy();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="plain">army[0](); </code><code class="comments">// 0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="plain">army[1](); </code><code class="comments">// 1</code></td></tr></tbody></table></div></div></div><p></p>
<p>Посмотрим выделенный фрагмент более внимательно, чтобы понять, что происходит:</p>
<p></p><div id="highlighter_86662538303" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_86662538303_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_86662538303" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">var</code> <code class="plain">shooter = (</code><code class="keyword">function</code><code class="plain">(x) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="keyword">function</code><code class="plain">() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">alert( x ); </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">})(i);</code></td></tr></tbody></table></div></div></div><p></p>
<p>Функция <code>shooter</code> создана как результат вызова промежуточного функционального выражения <code>function(x)</code>, которое объявляется — и тут же выполняется, получая <code>x = i</code>.</p>
<p>Так как <code>function(x)</code> тут же завершается, то значение <code>x</code> больше не меняется. Оно и будет использовано в возвращаемой функции-стрелке.</p>
<p>Для красоты можно изменить название переменной <code>x</code> на <code>i</code>, суть происходящего при этом не изменится:
</p><div id="highlighter_96626680670" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_96626680670_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_96626680670" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">var</code> <code class="plain">shooter = (</code><code class="keyword">function</code><code class="plain">(i) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="keyword">function</code><code class="plain">() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">alert( i ); </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">})(i);</code></td></tr></tbody></table></div></div></div><p></p>
<p><strong>Кстати, обратите внимание — скобки вокруг <code>function(i)</code> не нужны</strong>, можно и так:
</p><div id="highlighter_76209133165" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_76209133165_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_76209133165" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">var</code> <code class="plain">shooter = </code><code class="keyword">function</code><code class="plain">(i) { </code><code class="comments">// <u>без скобок вокруг function(i)</u></code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="keyword">function</code><code class="plain">() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">alert( i ); </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">}(i);</code></td></tr></tbody></table></div></div></div><p></p>
<p>Скобки добавлены в код для лучшей читаемости, чтобы человек, который просматривает его, не подумал, что <code>var shooter = function</code>, а понял что это вызов «на месте», и присваивается его результат.
</p></li>
<li><strong>Еще один забавный способ - обернуть весь цикл во временную функцию</strong>:
<p></p><div id="highlighter_84790208633" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_84790208633_clipboard" type="application/x-shockwave-flash" title="копировать в буфер" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_84790208633" menu="false" src="/modules/syntaxhighlighter/clipboard.swf"></div><a href="http://learn.javascript.ru/closures-usage#viewSource" title="показать чистый исходник в новом окне" class="item viewSource" style="width: 16px; height: 16px;">показать чистый исходник в новом окне</a><a href="http://learn.javascript.ru/closures-usage#noList" title="Скрыть/показать номера строк" class="item noList" style="width: 16px; height: 16px;">Скрыть/показать номера строк</a><a href="http://learn.javascript.ru/closures-usage#printSource" title="печать кода с сохранением подсветки" class="item printSource" style="width: 16px; height: 16px;">печать кода с сохранением подсветки</a></div></div><div class="lines"><div class="run-toolbar"><input type="button" class="run-button" value="Запустить" style="width: 100px;"><a href="http://learn.javascript.ru/closures-usage#" title="Редактировать" class="edit-button">&nbsp;&nbsp;&nbsp;</a></div><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">function</code> <code class="plain">makeArmy() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">shooters = [];</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">for</code><code class="plain">(</code><code class="keyword">var</code> <code class="plain">i=0; i&lt;10; i++) (</code><code class="keyword">function</code><code class="plain">(i) {</code></td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>06</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">var</code> <code class="plain">shooter = </code><code class="keyword">function</code><code class="plain">() {</code></td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">alert( i ); </code></td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">};</code></td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">shooters.push(shooter); </code></td></tr></tbody></table></div><div class="line alt2 highlighted"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1 highlighted"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">})(i);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">shooters; </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="keyword">var</code> <code class="plain">army = makeArmy();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="plain">army[0](); </code><code class="comments">// 0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="plain">army[1](); </code><code class="comments">// 1</code></td></tr></tbody></table></div></div></div><p></p>
<p>Вызов <code>(function(i) { ... })</code> обернут в скобки, чтобы интерпретатор понял, что это <code>Function Expression</code>.</p>
<p>Плюс этого способа - в большей читаемости. Фактически, мы не меняем создание <code>shooter</code>, а просто обертываем итерацию в функцию.
</p></li>
</ol></div>


<div style="text-align:right;margin-bottom:-3px">

<a href="http://learn.javascript.ru/task/armiya-funkcij">[Открыть задачу в новом окне]</a></div>



</div>



<p></p>
 </div></div></div>
<div id="book-navigation-246" class="book-navigation">
    
    
        <div class="page-links clearfix">
                        <a href="http://learn.javascript.ru/closures" class="page-previous" title="На предыдущую страницу">‹ Замыкания, функции изнутри</a>
                                    <a title="Go to next page" class="page-next" href="http://learn.javascript.ru/static-variables">Статические переменные                ›</a>
                    </div>
        
</div>

        </div>

        <div class="node-details">
        <div class="submitted">21.09.2012</div>
        <div class="author"><a href="http://ikantor.moikrug.ru/">Илья Кантор</a></div>
    </div>
    

    
    
        <br style="clear:both">

        <div class="footer-share">
      <div style="margin-bottom:-3px">Если статья понравилась — поделитесь ей! Выберите одно или несколько:</div>

<style>
.share-list li {
  float: left;
  padding-top: 4px;
  list-style: none;
  margin: 5px;
}
.share-list {
margin: 0;
padding: 0;
}
</style>
<ul class="share-list">
<li>
<a href="https://twitter.com/share" class="twitter-share-button" data-lang="ru" data-size="large" data-count="none" style="display:block">Твитнуть</a>
</li>
<li>
<script>
!function(d,s,id){
  var js,fjs=d.getElementsByTagName(s)[0];
  if(!d.getElementById(id)){
    js=d.createElement(s);js.id=id;
    js.src="http://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js,fjs);
  }
}(document,"script","twitter-wjs");
</script>

<a href="http://vkontakte.ru/share.php?url=http%3A//learn.javascript.ru/closures-usage&title=%D0%A5%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B2%20%D0%B7%D0%B0%D0%BC%D1%8B%D0%BA%D0%B0%D0%BD%D0%B8%D0%B8%2C%20%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B8" title="Опубликовать ссылку на статью ВКонтакте" target="_blank" class="vkontakte" style="display:inline-block" onclick="window.open(this.href, &#39;Опубликовать ссылку на пост в Вконтакте&#39;, &#39;width=600,height=300&#39;); return false">Поделиться</a>
</li>

<li style="padding:0">
<g:plusone annotation="none" size="standard"></g:plusone>

<script>
  window.___gcfg = {lang: 'ru'};

  (function() {
    if (document.getElementById('gplus')) return;
    var po = document.createElement('script'); po.id = 'gplus'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();



</script>

</li>
<li>
<div style="display:inline-block" class="fb-like" data-send="false" data-layout="button_count" data-width="300" data-show-faces="false" data-font="arial"></div>
</li>
</ul>

<br style="clear:both">
    </div>

    <h2>Комментарии</h2>
    <ol>
    <li>Приветствуются комментарии, содержащие дополнения и вопросы по статье, и ответы на них.</li>
    <li>Если ваш комментарий касается задачи – откройте её в отдельном окне и напишите там.</li>
    <li>Для кода внутри строки используйте тег <code>&lt;code&gt;</code>, для блока кода – тег <code>&lt;pre&gt;</code>, если больше 10 строк – ссылку на <a href="http://learn.javascript.ru/play">песочницу</a>.</li>
    <li>Если что-то непонятно – пишите, что именно и с какого места.</li>
    </ol>
        
        <div id="disqus_thread"><noscript>&lt;p&gt;&lt;a href="http://learnjavascriptru.disqus.com/?url=http%3A%2F%2Flearn.javascript.ru%2Fclosures-usage"&gt;View the discussion thread.&lt;/a&gt;&lt;/p&gt;</noscript></div>    
    <div style="clear:both"></div>

</div>
</div>
 </div>
  </div>
		<!-- /main-content-block --></div>
		
        



<!-- PRINTING BLOCK AFTER THE CONTENT -->





<div style="text-align:center"><a href="http://learn.javascript.ru/closures-usage#body">Наверх</a></div>


<!-- / column-2 --></div>



<!-- column-3 -->
<script>
applyRightColumnHidden();
</script>
<div class="column-3">  <div class="region region-right">
      <div class="block block-open 
  block-block clearfix" id="block-block-1">
      	<a href="http://learn.javascript.ru/closures-usage#" class="block-title"><div class="title-toggle">»</div>PDF учебника</a>
      
   <div class="content clearfix"> <ul><li><a href="http://learn.javascript.ru/content/uchebnik-pdf-dlya-pechati">Для печати: 350р (~10$)</a></li>
<li><a href="http://learn.javascript.ru/content/uchebnik-pdf-dlya-chteniya-s-ustroystv">Для чтения с устройств: 350р</a></li>
<li><a href="http://learn.javascript.ru/content/uchebnik-pdf-dlya-chteniya-i-pechati">Оба варианта: 450р (~15$)</a></li>
</ul> </div>
 </div>
  <div class="block block-open 
  block-book clearfix" id="block-book-navigation">
      	<a href="http://learn.javascript.ru/closures-usage#" class="block-title"><div class="title-toggle">»</div>Содержание</a>
      
   <div class="content clearfix"><ul class="menu"><li class="first collapsed"><a href="http://learn.javascript.ru/getting-started">Общая информация</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/first-steps">Основы JavaScript</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/writing-js">Пишем на JavaScript</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/data-structures">Структуры данных</a></li>
<li class="expanded active-trail"><a href="http://learn.javascript.ru/functions-closures" class="active-trail">Функции и замыкания</a><ul class="menu"><li class="first leaf"><a href="http://learn.javascript.ru/function-is-value">Функция - это значение</a></li>
<li class="leaf"><a href="http://learn.javascript.ru/function-declaration-expression">Function Declaration и Function Expression</a></li>
<li class="leaf"><a href="http://learn.javascript.ru/named-function-expression">Именованные функциональные выражения </a></li>
<li class="leaf"><a href="http://learn.javascript.ru/global-object">Глобальный объект</a></li>
<li class="leaf"><a href="http://learn.javascript.ru/closures">Замыкания, функции изнутри</a></li>
<li class="leaf active-trail"><a href="./Хранение данных в замыкании, модули   Учебник JavaScript_files/Хранение данных в замыкании, модули   Учебник JavaScript.htm" class="active-trail active">Хранение данных в замыкании, модули</a></li>
<li class="leaf"><a href="http://learn.javascript.ru/static-variables">Статические переменные</a></li>
<li class="last leaf"><a href="http://learn.javascript.ru/with">Конструкция "with" </a></li>
</ul></li>
<li class="collapsed"><a href="http://learn.javascript.ru/function-arguments">Аргументы функций</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/objects-more">Объекты и методы</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/types">Получение и проверка типа</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/additional">Разные темы</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/css-for-js">CSS для JavaScript-разработчика </a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/document">Документ и объекты страницы</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/events-and-interfaces">События, взаимодействие с посетителем</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/animation">Анимация</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/jquery-stub">jQuery: курс немолодого бойца [в работе]</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/widgets">Создание графических компонентов</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/inheritance-prototypes">Продвинутая работа с объектами</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/optimize">Оптимизация</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/compress">Сжатие JavaScript</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/extra">Разное</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/frames-and-windows">Окна и Фреймы</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/regular-expressions-javascript">Регулярные выражения [в работе]</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/tools">Сундучок с инструментами</a></li>
<li class="collapsed"><a href="http://learn.javascript.ru/hooray">Ура, я знаю JavaScript!</a></li>
<li class="last collapsed"><a href="http://learn.javascript.ru/ajax">AJAX</a></li>
</ul></div>
 </div>
  <div class="block block-open 
  block-block clearfix" id="block-block-8">
      	<a href="http://learn.javascript.ru/closures-usage#" class="block-title"><div class="title-toggle">»</div>Видео-версия учебника</a>
      
   <div class="content clearfix"> <ul><li><a style="white-space:nowrap" href="http://learn.javascript.ru/content/video-versiya-pervoy-chasti-uchebnika">Видео по 1й части учебника: 900р.</a></li>
</ul> </div>
 </div>
  <div class="block block-open 
  block-block clearfix" id="block-block-3">
      	<a href="http://learn.javascript.ru/closures-usage#" class="block-title"><div class="title-toggle">»</div>Полезная реклама</a>
      
   <div class="content clearfix"><div style="text-align:center"><a href="http://www.jetbrains.com/webstorm/?utm_source=javascript.ru&utm_medium=banner2&utm_campaign=webstorm" style="display:block;width:200px;height:200px;background:url(/files/ad/ws_2.png)"></a></div>

</div>
 </div>
  <div class="block block-open 
  block-mistype clearfix" id="block-mistype-mistype">
      	<a href="http://learn.javascript.ru/closures-usage#" class="block-title"><div class="title-toggle">»</div>Нашли опечатку?</a>
      
   <div class="content clearfix">Нашли опечатку на сайте? Что-то кажется странным?
Выделите соответствующий текст и нажмите Ctrl+Enter!</div>
 </div>
  <div class="block block-open 
  block-disqus clearfix" id="block-disqus-disqus_recent_comments">
      	<a href="http://learn.javascript.ru/closures-usage#" class="block-title"><div class="title-toggle">»</div>Последние комментарии</a>
      
   <div class="content clearfix"><div id="dsq-recentcomments" class="dsq-widget"><script type="text/javascript" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/recent_comments_widget.js"></script> <style type="text/css" media="screen">	 .dsq-widget ul.dsq-widget-list {	 padding: 0;	 margin: 0;	 text-align: left;	 }	 img.dsq-widget-avatar {	 width: 32px;	 height: 32px;	 border: 0px;	 margin: 0px;	 padding: 0px 3px 3px 0px;	 float: left;	 }	 a.dsq-widget-user {	 font-weight: bold;	 }	 a.dsq-widget-thread {	 font-weight: bold;	 }	 p.dsq-widget-meta {	 clear: both;	 font-size: 80%;	 padding: 0;	 margin: 0;	 }	 li.dsq-widget-item {	 margin: 15px 0;	 list-style-type: none;	 clear: both;	 }	 span.dsq-widget-clout {	 padding: 0 2px;	 background-color: #ff7300;	 color: #fff;	 }	 table.dsq-widget-horiz td {	 padding-right: 15px;	 }	 .dsq-widget-comment p {	 display: inline;	 }	 </style>	 <ul class="dsq-widget-list">	 <li class="dsq-widget-item">	 <a href="http://disqus.com/kill_windows/"><img class="dsq-widget-avatar" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/avatar92.jpg"></a>	 <a class="dsq-widget-user" href="http://disqus.com/kill_windows/">kill_windows</a>	 <span class="dsq-widget-comment"><p>Еще ситуацию может прояснить, если почитать что такое анонимные функции.</p></span>	 <p class="dsq-widget-meta"><a href="http://learn.javascript.ru/closures">Замыкания, функции изнутри</a>&nbsp;·&nbsp;<a href="http://learn.javascript.ru/closures#comment-1594379282">29 minutes ago</a></p>	 </li>	 <li class="dsq-widget-item">	 <img class="dsq-widget-avatar" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/noavatar92.png">	 Gert	 <span class="dsq-widget-comment"><p>Потому что это объект. И скобки не круглые, а фигурные.</p></span>	 <p class="dsq-widget-meta"><a href="http://learn.javascript.ru/websockets">WebSocket </a>&nbsp;·&nbsp;<a href="http://learn.javascript.ru/websockets#comment-1593910702">11 hours ago</a></p>	 </li>	 <li class="dsq-widget-item">	 <img class="dsq-widget-avatar" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/noavatar92.png">	 Филя	 <span class="dsq-widget-comment"><p>Потому что инкремент изменяет значение переменной.</p></span>	 <p class="dsq-widget-meta"><a href="http://learn.javascript.ru/task/inkrement-i-dekrement-primery">Инкремент и декремент, примеры</a>&nbsp;·&nbsp;<a href="http://learn.javascript.ru/task/inkrement-i-dekrement-primery#comment-1593909151">11 hours ago</a></p>	 </li>	 <li class="dsq-widget-item">	 <img class="dsq-widget-avatar" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/noavatar92.png">	 Марат	 <span class="dsq-widget-comment"><p>Допустим в первом расчёте где ты получаешь 'а' , ты же присваиваешь всё это переменной 'а'... почему b=7, c=5 ведь они участвуют лишь для получения результата переменной 'a'?</p></span>	 <p class="dsq-widget-meta"><a href="http://learn.javascript.ru/task/inkrement-i-dekrement-primery">Инкремент и декремент, примеры</a>&nbsp;·&nbsp;<a href="http://learn.javascript.ru/task/inkrement-i-dekrement-primery#comment-1593556203">15 hours ago</a></p>	 </li>	 <li class="dsq-widget-item">	 <a href="http://disqus.com/rodionmescheryakov/"><img class="dsq-widget-avatar" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/avatar92(1).jpg"></a>	 <a class="dsq-widget-user" href="http://disqus.com/rodionmescheryakov/">Rodion Mescheryakov</a>	 <span class="dsq-widget-comment"><p>Если коротко, то только потому, что ты ошибся с одной строке в последнем цикле: вместо <code>sum += i</code> надо написать <code>sum += arr[i]</code>. А вообще, код можно переписать гораздо короче....</p></span>	 <p class="dsq-widget-meta"><a href="http://learn.javascript.ru/array">Массивы c числовыми индексами</a>&nbsp;·&nbsp;<a href="http://learn.javascript.ru/array#comment-1593532163">15 hours ago</a></p>	 </li>	 </ul></div></div>
 </div>
  <div class="block block-open 
  block-block clearfix" id="block-block-4">
      	<a href="http://learn.javascript.ru/closures-usage#" class="block-title"><div class="title-toggle">»</div>Поделись!</a>
      
   <div class="content clearfix">Помоги другим узнать о хорошей статье!
<div style="height:120px">

<a href="https://twitter.com/share" class="twitter-share-button" data-lang="ru" data-size="large" data-count="none">Твитнуть</a>

<script>
!function(d,s,id){
  var js,fjs=d.getElementsByTagName(s)[0];
  if(!d.getElementById(id)){
    js=d.createElement(s);js.id=id;  
    js.src="//platform.twitter.com/widgets.js";  
    fjs.parentNode.insertBefore(js,fjs);
  }
}(document,"script","twitter-wjs");

window.___gcfg = {lang: 'ru'};

  (function() {
    if (document.getElementById('gplus')) return;
    var po = document.createElement('script'); po.id = 'gplus'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();

</script>

<div style="margin-bottom:5px" class="fb-like" data-send="false" data-layout="button_count" data-width="300" data-show-faces="false" data-font="arial"></div>

<style>
.vk-share-wrapper td { padding: 0 }
</style>
<div class="vk-share-wrapper">
<script type="text/javascript" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/share.js" charset="windows-1251"></script>
<script>
window.VK && document.write(VK.Share.button({
  url: "http://learn.javascript.ru/closures-usage",
  title: "Хранение данных в замыкании, модули",
  image: "http://learn.javascript.ru/themes/analytic/images/smart.gif",
  noparse: true}, { type: "round", text: 'Поделиться' }));

</script><table cellspacing="0" cellpadding="0" id="vkshare0" onmouseover="VK.Share.change(1, 0);" onmouseout="VK.Share.change(0, 0);" onmousedown="VK.Share.change(2, 0);" onmouseup="VK.Share.change(1, 0);" style="position: relative; width: auto; cursor: pointer; border: 0px;"><tbody><tr style="line-height: normal;"><td style="vertical-align: middle;"><a href="http://vk.com/share.php?url=http%3A%2F%2Flearn.javascript.ru%2Fclosures-usage" onmouseup="this._btn=event.button;this.blur();" onclick="return VK.Share.click(0, this);" style="border: none;background: #5F83AA;-webkit-border-radius: 2px 0px 0px 2px;-moz-border-radius: 2px 0px 0px 2px;border-radius: 2px 0px 0px 2px;display:block;text-decoration: none;padding: 3px 3px 3px 6px;color: #FFFFFF;font-family: tahoma, arial;height: 15px;line-height:15px;font-size: 10px;text-shadow: none;">Поделиться<div class="float:right"></div></a></td><td style="vertical-align: middle;"><a href="http://vk.com/share.php?url=http%3A%2F%2Flearn.javascript.ru%2Fclosures-usage" onmouseup="this._btn=event.button;this.blur();" onclick="return VK.Share.click(0, this);" style="border: none;background: #5F83AA;-webkit-border-radius: 0px 2px 2px 0px;-moz-border-radius: 0px 2px 2px 0px;border-radius: 0px 2px 2px 0px;display:block; padding: 3px;"><div style="background: url(&#39;//vk.com/images/icons/share_logo.png&#39;) 0px 0px no-repeat; background-size: 16px 31px; width: 15px;height: 15px;"></div></a></td><td style="vertical-align: middle;"><a href="http://vk.com/share.php?url=http%3A%2F%2Flearn.javascript.ru%2Fclosures-usage" onmouseup="this._btn=event.button;this.blur();" onclick="return VK.Share.click(0, this);" style="text-decoration: none; font-weight: bold; font-family: tahoma, arial; display: block;"><div style="background: url(&#39;//vk.com/images/icons/share_logo.png&#39;) 0px -24px no-repeat; background-size: 16px 31px; width: 4px; height: 7px;position: absolute; margin: 7px 0px 0px 4px;z-index:100;"></div><div id="vkshare_cnt0" style="border: 1px solid #bbbfc4;background: #FFFFFF;height: 15px;line-height: 15px;5px; padding: 2px 4px;min-width: 12px;margin-left: 7px;border-radius: 2px;-webkit-border-radius: 2px;-moz-border-radius:2px;text-align: center; color: #666c73;font-size: 10px;z-index:99;">8</div></a></td></tr></tbody></table>
</div>

<div style="margin-top:6px">
<g:plusone annotation="inline" width="120" size="standard" style="vertical-align:middle"></g:plusone>
</div>
</div></div>
 </div>
  </div>
</div>
<!-- / column-3 -->


<script>
applyBlockCollapse();
</script>
</div> 
<!-- column wrapper -->

<!-- footer -->
 
  
<!-- footer -->
<div id="footer" class="clearfix">


    
    <div class="clearfix">

Обновления — в твиттере: <a href="https://twitter.com/iliakan" class="twitter-follow-button" data-show-count="false" data-lang="ru">Читать @iliakan</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="http://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<style>
.twitter-follow-button {
vertical-align: middle;
display: inline-block;
}
</style>

        <div>Текст и код на этом сайте публикуются под открытой лицензией <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.ru">CC BY-NC-SA</a>.<br>
          JavaScript™ – зарегистрированная торговая марка Oracle. Этот сайт не имеет отношения к Oracle.
            </div>

        <p><span>By Ilya Kantor</span> <a href="http://twitter.com/iliakan">Twitter</a> <a href="https://plus.google.com/100781184681750088851?rel=author">G+</a>, 2011-2013. Помогал Алексей Шистеров.</p>
<!-- begin WebMoney Transfer : accept label -->
<a href="http://www.megastock.ru/" target="_blank"><img src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/webmoney.png" alt="www.megastock.ru" border="0"></a>
<img src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/visa.png">
<img src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/mastercard.png">
<!-- end WebMoney Transfer : accept label -->

</div>

</div>
<!-- /footer -->


<script>

    var _gaq = window._gaq = [];
    _gaq.push(["_addOrganic", "go.mail.ru","q"]);
    _gaq.push(["_addOrganic", "nova.rambler.ru","query"]);
    _gaq.push(["_addOrganic", "nigma.ru", "s"]);
    _gaq.push(["_addOrganic", "blogs.yandex.ru", "text", true]);
    _gaq.push(["_addOrganic", "webalta.ru", "q"]);
    _gaq.push(["_addOrganic", "aport.ru", "r"]);
    _gaq.push(["_addOrganic", "akavita.by", "z"]);
    _gaq.push(["_addOrganic", "meta.ua", "q"]);
    _gaq.push(["_addOrganic", "bigmir.net", "q"]);
    _gaq.push(["_addOrganic", "tut.by", "query"]);
    _gaq.push(["_addOrganic", "all.by", "query"]);
    _gaq.push(["_addOrganic", "i.ua", "q"]);
    _gaq.push(["_addOrganic", "online.ua", "q"]);
    _gaq.push(["_addOrganic", "a.ua", "s"]);
    _gaq.push(["_addOrganic", "ukr.net", "search_query"]);
    _gaq.push(["_addOrganic", "search.com.ua", "q"]);
    _gaq.push(["_addOrganic", "search.ua", "query"]);
    _gaq.push(["_addOrganic", "poisk.ru", "text"]);
    _gaq.push(["_addOrganic", "km.ru", "sq"]);
    _gaq.push(["_addOrganic", "liveinternet.ru", "ask"]);
    _gaq.push(["_addOrganic", "quintura.ru", "request"]);
    _gaq.push(["_addOrganic", "search.qip.ru","query"]);
    _gaq.push(["_addOrganic", "gde.ru","keywords"]);
    _gaq.push(["_addOrganic", "search.ukr.net","search_query"]);
    _gaq.push(["_addOrganic", "gogo.ru","q"]);

    _gaq.push(['_setAccount', 'UA-2056213-16']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script');
        ga.src = 'http://www.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
    })();

</script>

<div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_http" frameborder="0" allowtransparency="true" scrolling="no" id="fb_xdm_frame_http" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/ZEbdHPQfV3x.htm" style="border: none;"></iframe><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/ZEbdHPQfV3x(1).htm" style="border: none;"></iframe></div></div></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "http://connect.facebook.net/ru_RU/all.js#xfbml=1&appId=112959575461438";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter17649010 = new Ya.Metrika({id:17649010,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript>&lt;div&gt;&lt;img src="//mc.yandex.ru/watch/17649010" style="position:absolute; left:-9999px;" alt="" /&gt;&lt;/div&gt;</noscript>
<!-- /Yandex.Metrika counter -->

<script async="" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/adsbygoogle.js"></script>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


<!-- /footer -->



</div>



    


</body><iframe allowtransparency="true" src="./Хранение данных в замыкании, модули   Учебник JavaScript_files/top.htm" frameborder="0" id="abs-top-frame" style="position: fixed; z-index: 4294967295; overflow: hidden; top: 0px; left: 0px; right: 0px; width: 138px; height: 13px; max-height: none; min-height: 0px; margin: 0px auto; padding: 0px; border: 0px; display: block; background-color: transparent;"></iframe></html>